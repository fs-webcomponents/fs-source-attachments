<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../fs-client/fs-client.html">
<link rel="import" href="../fs-behavior/fs-behavior.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-styles/color.html">

<!--
A FamilySearch sign in button.

Example:

    <fs-signin></fs-signin>

@group FamilySearch Elements
@element fs-signin
@demo demo/index.html
-->
<dom-module id="fs-signin">
  <template>
    <style>
      :host {
        font-family: arial;
      }
      
      paper-button {
        background-color: var(--paper-grey-200);
        color: #333;
      }
      
      paper-button.recommended {
        background-color: var(--paper-blue-500);
        color: #fff;
      }
    </style>
    <fs-client id="client" name="{{clientName}}" on-authenticated-changed="_authenticatedChanged"></fs-client>
    <paper-button id="button" class$="{{_computeClass(signedIn)}}" on-click="_clickAction">{{_computeText(signedIn)}}</paper-button>
  </template>
</dom-module>
<script>

  Polymer({
    
    is: 'fs-signin',
    
    behaviors: [FSBehavior],
    
    properties: {
      
      signedIn: {
        type: Boolean,
        notify: true,
        value: false
      }
      
    },

    ready: function(){
      this.signedIn = this.isAuthenticated();
    }, 
    
    _clickAction: function(){
      if(this.signedIn){
        this.$.client.signOut();
      } else {
        this.$.client.signIn();
      }
    },
    
    _authenticatedChanged: function(e){
      this.signedIn = e.detail.value;
    },
    
    _computeText: function(signedIn){
      return signedIn ? 'Sign Out' : 'Sign In';
    },
    
    _computeClass: function(signedIn){
      return signedIn ? '' : 'recommended';
    }
    
  });
</script>